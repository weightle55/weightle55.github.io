---
layout: default
title : 1. Monolithic 아키텍쳐
description : "모놀리식 아키텍쳐"
nav-order: 1
parent: MSA
---

## 용어 정리
* 컴포넌트(Component) : 기능별 단위 (API 컴포넌트, 저장소 컴포넌트)
* 아키텍트(architect) : 컴포넌트를 나누고 합치는 디자인을 하는 사람
* 소프트웨어 아키텍쳐(software architecture) : 컴포넌트와 컴포넌트의 관계를 정리한 것
* 모놀리식 시스템 아키텍쳐(monolithic system architecture) : 서비스의 기능을 하나의 API 컴포넌트에서 처리하는 구조
* 분산 처리 시스템 아키텍쳐(distributed processing system architecture) : 기능을 분리하여 두 개 이상의 API 컴포넌트에서 처리하는 구조(MSA는 분산 처리 시스템 아키텍쳐 중 하나)


---

## 모놀리식 아키텍쳐 (Monolithic Architecture)
* 하나의 시스템이 서비스 전체 기능을 처리하도록 설계된 것, 단일 애플리케이션
* 단일 WAS에서 모든 기능을 처리하도록 구성
* 단일 데이터 저장소 -> 일반적으로 RDB를 사용

### 장점
1. 개발 운용이 편리
2. 하나의 코드베이스로 관리 가능
3. 데이터는 객체들 사이에서만 전달 된다. -> 서비스의 기능들은 클래스들의 유기적인 조합으로 이루어진다.
4. 데이터 저장소가 하나이므로 RDB 트랜잭션 기능을 쉽게 사용 가능하다. -> 데이터를 영속할 때 일관성 유지
5. 테스트 환경 구성이 쉽다.

### 단점
1. 하나의 서비스에서 모든 기능을 처리함므로 기능이 많아질수록 코드가 복잡해진다. -> 스파게티 코드
2. 버그 수정시 서버를 재시작 해야하는 번거로움
3. 서버와 클라가 뒤섞여서 개발할 수 밖에 없음
4. 클라이언트의 플랫폼(IOS, Android)과 개발언어에 관계없이 중립적인 형태의 API를 제공해야만 한다. <br/>-> REST API -> JSON serialization/deserialization 같은 부가적인 기능들이 포함되어야만 함. (비즈니스 영역이 핵심이 아닌 기능)
5. 기능이 쌓일수록 복잡해지고 빌드하는 시간이 늘어나 개발 속도나 생산성 하락

---

### 모놀리식의 단점 완화 방법
* 분산 부하 
  * L4, L7 등 하드웨어나 HAproxy 같은 소프트웨어 로드 밸런서를 사용하여, 요청 처리 분배
  * WAS인스턴스를 scale-out(수평적 확장) 하여 안정성을 높이고 처리량을 증가시킨다.
* 분산 부하의 한계
  * 로드 밸랜서 성능 한계 -> 확장의 한계
  * 요청의 처리의 선형적 분배로 인한 리소스 낭비

---

### 모놀리식이 아닌 다른 아키텍쳐를 고민해야 하는 상황
* 클라이언트 요청이 많아 지는데, 로드 밸런서 확장에 한계가 있을 때
* 데이터베이스 성능을 높여도 더 이상 성능 개선의 여지가 없을 때
* 기능 확장 요구가 많지만 현재 시스템 구조로 불가능할 때
* 소스 코드가 너무 복잡해서 리팩터링이 필요할 때
* 기능 중 하나라도 변경되면 전체 QA를 해야할 때
* 기능을 수정하면 다른 기능에 연쇄적으로 버그가 발생할 때
* 개발자는 늘었는데, 개발 속도는 이전 같지 않을 때 